# Чек-лист API тестов
* Корректность структуры данных
* POST запросы
  * Заполнены все поля валидными данными
  * Заполнены только обязательные поля
  * Заполнены не все обязательные поля
  * Не заполнено ни одно поле
  * Валидация данных в полях (корректные и некорректные данные)
  * Пустой JSON
  * Дата создания объекта
* GET запросы
  * Пустой список (если возможно)
  * Заполненный список
  * Пагинация в списке (limit, offset)
  * Получение списка с ограничением на количество записей
  * Получение списка начиная с указанного номера
  * В случае передачи параметров с некорректным значением возвращается 400 с описанием ошибки в теле ответа
  * При отрицательном offset список пользователей возвращается начиная с первой позиции
  * При несуществующем offset возвращается пустой список пользователей
  * Сортировка списка
  * Запрос данных по валидному ID, проверка возвращения корректных данных
  * Запрос данных по несуществующему ID, но в валидном формате
  * Запрос данных по невалидному ID
* PUT запросы
  * Обновление с корректными данными
  * Обновление по несуществующему ID
  * Обновление по невалидному ID
  * Валидация полей (корректные и некорректные данные)
  * Частичное обновление (в JSON присутствуют не все поля) 
* DELETE запросы
  * Удаление существующего объекта
  * Удаление уже удаленного объекта
  * Удаление по несуществующему ID
  * Удаление по невалидному ID
  * Удаление и повторное добавление такой же сущности (если есть уникальные поля)
* Проверка статусов ответов
* Проверка всех возможных ошибок


что смотреть по api

Правильное тело (пример)
Бизнес-логика: позитив, негатив
Различные параметры (обязательность, работа параметров)
Перестановка мест слагаемых (заголовки, тело)
Регистрозависимость (заголовки, тело)
Ошибки: не well formed xml / json

Где искать параметры:
В URL
В заголовках
В теле запроса
Комбинация

Тестирование параметров:
Правильный параметр (из примера)
Обязательность (что, если параметр не указать?)
Бизнес-логика (тест-дизайн)
Регистрозависимость (если параметр текстовый)
Перестановка местами
То есть берём REST-часть и обычную, применяем тест-дизайн, словно это параметр в графическом интерфейсе.
Тестирование заголовков:
Заголовки из документации работают (в целом)
А если какой-то не передать? (обязательность)
А если передать, но неправильно? (текст ошибки)
Позитивные тесты по доке
Регистронезависимость заголовков

Что смотрим в ответе:
Status Code
Body
В теле смотрим:
Какие поля вернулись в ответе?
Значения в полях
Текст ошибок 

Поля в ответе нужно:
сравнить с ТЗ

обязательность параметра
  отсутствует строго-обязательный параметр
  отсутствует параметр, являющийся обязательном при отсутствии другого
  отсутствует параметр, являющийся обязательным при наличии другого
  отсутствует параметр, являющийся обязательным в списке "обязательно один из..."
тип данных (нужна строка, а пришло число)
регулярка
  длина
  множество допустимых значений
связь между значениями параметров в запросе (например, start_date > end_date)


А дальше выходим на уровень взаимодействия с базой (если такое есть / будет)
duplicate key (для уникальных индексов)
использование несуществующих значений foreign key
какие-либо другие конфликты с существующими данными в базе (обычно в триггерах проверяется)

Либо наш API-метод выполняет какое-то другое действие. Всё зависит от "выходов" (куда данные, полученные в метод, "выходят"):
либо проксируются синхронно в другой API-метод
либо данные попадают в базу (реляционную / нереляционную; REDIS в данном контексте я также с натяжкой называю базой)
либо данные попадают в очередь (любая MQ-платформа = Rabbit, Kafka, WebSphere, ...)
либо данные попадают в файловую систему (напрямую или через любой протокол, типа FTP)
либо данные попадают в память сервиса (нелюбимый с точки зрения тестирования вариант)
Все описанные выше проверки -- сервер принял запрос на обработку. Ни о каком Bad Request тут речи быть не может.
